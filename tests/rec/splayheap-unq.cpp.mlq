
#define S(v)   (sz v)

#define R(p)   [[], [v: p, v: true, v: true]]
#define HP     [z: t . || e0: 'a, e1: R(v <= e0) z, e2: R(v >= e0) z]
#define SHP    R(true) HP

axiom pos: forall (x: int. S(x) >= 0)

measure sz =
  | E -> 0
  | T (_, l, r) -> 1 + sz l + sz r

val empty     : {v: SHP | S(v) = 0} 
val isEmpty   : t: SHP -> {v: bool | (? v -> S(t) = 0)}
val insert    :  'a -> t: SHP -> {v: SHP | S(v) = S(t) + 1}
val merge     : t': SHP -> t: SHP -> {v: SHP | S(v) = S(t') + S(t)} 
val findMin2  : t: {v: SHP | S(v) > 0} -> ('a * {v: R(e0 <= v) HP | v = t})
val deleteMin : t: {v: SHP | S(v) > 0} -> {v: SHP | S(v) = S(t) - 1}
val deleteMin2: t: {v: SHP | S(v) > 0} -> ('a * {v: R(e0 <= v) HP | S(v) = S(t) - 1})
val to_list2  : SHP -> 'a list

