#!/bin/bash
#not actually a regression test
OCAML=./ocaml.run
TMPDIR=/tmp
FLAGS="-dqexprs"
POSFILE=postests
NEGFILE=negtests
RESFILE=$1

rm -f $TMPDIR/*.lilog


echo RUNNING POSFILE
for i in `cat $POSFILE`
do
  echo RUNNING: $i 
  $OCAML $FLAGS $i &> $TMPDIR"/"${i/\//_}".lilog"
  if [ $? = 0 ] 
  then 
    echo "SUCCESS!"
  else
    echo "FAILURE :("
  fi
done
echo DONE

echo RUNNING NEGFILE
for i in `cat $NEGFILE`
do
  echo RUNNING: $i 
  $OCAML $FLAGS $i &> $TMPDIR"/"${i/\//_}".lilog"
  if [ $? = 1 ] 
  then 
    echo "SUCCESS!"
  else
    echo "FAILURE :("
  fi
done
echo DONE

FILE=$POSFILE"\n"$NEGFILE
FILE=${FILE/\//_}

#OUT_FILES=`ls $TMPDIR"/*.lilog"`


#grovel through output files for stats below:

#IN=0
#for i in $OUT_FILES
#do
#   $IN 

#done
